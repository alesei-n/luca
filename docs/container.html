<!DOCTYPE html>  <html> <head>   <title>container.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="base_toolbar.html">                 base_toolbar.coffee               </a>                                           <a class="source" href="button_field.html">                 button_field.coffee               </a>                                           <a class="source" href="checkbox_field.html">                 checkbox_field.coffee               </a>                                           <a class="source" href="file_upload_field.html">                 file_upload_field.coffee               </a>                                           <a class="source" href="hidden_field.html">                 hidden_field.coffee               </a>                                           <a class="source" href="select_field.html">                 select_field.coffee               </a>                                           <a class="source" href="text_area_field.html">                 text_area_field.coffee               </a>                                           <a class="source" href="text_field.html">                 text_field.coffee               </a>                                           <a class="source" href="type_ahead_field.html">                 type_ahead_field.coffee               </a>                                           <a class="source" href="filterable_collection.html">                 filterable_collection.coffee               </a>                                           <a class="source" href="form_button_toolbar.html">                 form_button_toolbar.coffee               </a>                                           <a class="source" href="form_view.html">                 form_view.coffee               </a>                                           <a class="source" href="grid_view.html">                 grid_view.coffee               </a>                                           <a class="source" href="template.html">                 template.coffee               </a>                                           <a class="source" href="card_view.html">                 card_view.coffee               </a>                                           <a class="source" href="column_view.html">                 column_view.coffee               </a>                                           <a class="source" href="modal_view.html">                 modal_view.coffee               </a>                                           <a class="source" href="panel_view.html">                 panel_view.coffee               </a>                                           <a class="source" href="split_view.html">                 split_view.coffee               </a>                                           <a class="source" href="tab_view.html">                 tab_view.coffee               </a>                                           <a class="source" href="viewport.html">                 viewport.coffee               </a>                                           <a class="source" href="collection.html">                 collection.coffee               </a>                                           <a class="source" href="container.html">                 container.coffee               </a>                                           <a class="source" href="field.html">                 field.coffee               </a>                                           <a class="source" href="view.html">                 view.coffee               </a>                                           <a class="source" href="framework.html">                 framework.coffee               </a>                                           <a class="source" href="index.html">                 index.coffee               </a>                                           <a class="source" href="collection_manager.html">                 collection_manager.coffee               </a>                                           <a class="source" href="socket_manager.html">                 socket_manager.coffee               </a>                                           <a class="source" href="deferrable.html">                 deferrable.coffee               </a>                                           <a class="source" href="local_storage.html">                 local_storage.coffee               </a>                                           <a class="source" href="spin.html">                 spin.coffee               </a>                                           <a class="source" href="toolbars.html">                 toolbars.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               container.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h3>The Component Container</h3>

<p>The Component Container is a nestable component
which is responsible for laying out the many components
it contains, assigning them to a DOM container, and
automatically instantiating and rendering the components
in their proper place.  </p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Luca.core.Container = </span><span class="nx">Luca</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span> 
  <span class="nv">className: </span><span class="s1">&#39;luca-ui-container&#39;</span>

  <span class="nv">componentClass: </span><span class="s1">&#39;luca-ui-panel&#39;</span>
  
  <span class="nv">isContainer: </span><span class="kc">true</span>

  <span class="nx">hooks</span><span class="o">:</span><span class="p">[</span>
    <span class="s2">&quot;before:components&quot;</span><span class="p">,</span>
    <span class="s2">&quot;before:layout&quot;</span><span class="p">,</span>
    <span class="s2">&quot;after:components&quot;</span><span class="p">,</span>
    <span class="s2">&quot;after:layout&quot;</span><span class="p">,</span>
    <span class="s2">&quot;first:activation&quot;</span>
  <span class="p">]</span>

  <span class="nv">rendered: </span><span class="kc">false</span>

  <span class="nv">components: </span><span class="p">[]</span>

  <span class="nv">initialize: </span><span class="nf">(@options={})-&gt;</span>
    <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span> <span class="err">@</span><span class="p">,</span> <span class="nx">@options</span>

    <span class="nx">@setupHooks</span><span class="p">(</span> <span class="nx">Luca</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">Container</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hooks</span> <span class="p">)</span>

    <span class="nx">Luca</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span> <span class="err">@</span><span class="p">,</span> <span class="nx">arguments</span>
  </pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h3>Rendering Pipeline</h3>

<p>A container has nested components.  these components
are automatically rendered inside their own DOM element
and then CSS configuration is generally applied to these 
DOM elements.  Each component is assigned to this DOM
element by specifying a @container property on the component.</p>

<p>Each component is instantiated by looking up its @ctype propery
in the Luca Component Registry.  Then the components are rendered
by having their @render() method called on them.</p>

<p>Any class which extends Luca.View will have its defined render method
wrapped in a method which triggers "before:render", and "after:render"
before and after the defined render method.</p>

<p>so you can expect the following, for any container or nested container</p>

<p>DOM Element Manipulation:</p>

<p>beforeRender()
beforeLayout()
prepareLayout()
afterLayout()</p>

<p>Luca / Backbone Component Manipulation</p>

<p>beforeComponents()
prepareComponents()
  createComponents()
  renderComponents() ->
    calls render() on each component, starting this whole cycle</p>

<p>afterComponents()</p>

<p>DOM Injection</p>

<p>render()
afterRender()</p>

<p>For Components which are originally hidden
( card view, tab view, etc )</p>

<p>firstActivation() </p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">beforeRender: </span><span class="nf">()-&gt;</span>
    <span class="nx">@debug</span> <span class="s2">&quot;container before render&quot;</span>
    <span class="nx">@doLayout</span><span class="p">()</span> 
    <span class="nx">@doComponents</span><span class="p">()</span>

  <span class="nv">doLayout: </span><span class="nf">()-&gt;</span>
    <span class="nx">@debug</span> <span class="s2">&quot;container do layout&quot;</span>
    <span class="nx">@trigger</span> <span class="s2">&quot;before:layout&quot;</span><span class="p">,</span> <span class="err">@</span>
    <span class="nx">@prepareLayout</span><span class="p">()</span>    
    <span class="nx">@trigger</span> <span class="s2">&quot;after:layout&quot;</span><span class="p">,</span> <span class="err">@</span>

  <span class="nv">doComponents: </span><span class="nf">()-&gt;</span>
    <span class="nx">@debug</span> <span class="s2">&quot;container do components&quot;</span>

    <span class="nx">@trigger</span> <span class="s2">&quot;before:components&quot;</span><span class="p">,</span> <span class="err">@</span><span class="p">,</span> <span class="nx">@components</span>
    <span class="nx">@prepareComponents</span><span class="p">()</span>
    <span class="nx">@createComponents</span><span class="p">()</span>
    <span class="nx">@renderComponents</span><span class="p">()</span>
    <span class="nx">@trigger</span> <span class="s2">&quot;after:components&quot;</span><span class="p">,</span> <span class="err">@</span><span class="p">,</span> <span class="nx">@components</span>

  <span class="nv">applyPanelConfig: </span><span class="nf">(panel, panelIndex)-&gt;</span>
    <span class="nv">style_declarations = </span><span class="p">[]</span>
    
    <span class="nx">style_declarations</span><span class="p">.</span><span class="nx">push</span> <span class="s2">&quot;height: #{ (if _.isNumber(panel.height) then panel.height + &#39;px&#39; else panel.height ) }&quot;</span> <span class="k">if</span> <span class="nx">panel</span><span class="p">.</span><span class="nx">height</span>
    <span class="nx">style_declarations</span><span class="p">.</span><span class="nx">push</span> <span class="s2">&quot;width: #{ (if _.isNumber(panel.width) then panel.width + &#39;px&#39; else panel.width ) }&quot;</span> <span class="k">if</span> <span class="nx">panel</span><span class="p">.</span><span class="nx">width</span>
    <span class="nx">style_declarations</span><span class="p">.</span><span class="nx">push</span> <span class="s2">&quot;float: #{ panel.float }&quot;</span> <span class="k">if</span> <span class="nx">panel</span><span class="p">.</span><span class="nx">float</span>
    
    <span class="nv">config = </span>
      <span class="nv">classes: </span><span class="nx">panel</span><span class="o">?</span><span class="p">.</span><span class="nx">classes</span> <span class="o">||</span> <span class="nx">@componentClass</span>
      <span class="nv">id: </span><span class="s2">&quot;#{ @cid }-#{ panelIndex }&quot;</span>
      <span class="nv">style: </span><span class="nx">style_declarations</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>prepare layout is where you would perform the DOM element
creation / manipulation for how your container lays out
its components.  Minimally you will want to set the
container property on each component.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">prepareLayout: </span><span class="nf">()-&gt;</span>
    <span class="nx">@debug</span> <span class="s2">&quot;container prepare layout&quot;</span>
    <span class="vi">@componentContainers = </span><span class="nx">_</span><span class="p">(</span> <span class="nx">@components</span> <span class="p">).</span><span class="nx">map</span> <span class="p">(</span><span class="nx">component</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nx">@applyPanelConfig</span><span class="p">.</span><span class="nx">apply</span> <span class="err">@</span><span class="p">,</span> <span class="p">[</span> <span class="nx">component</span><span class="p">,</span> <span class="nx">index</span> <span class="p">]</span>
    
    <span class="k">if</span> <span class="nx">@appendContainers</span>
      <span class="nx">_</span><span class="p">(</span> <span class="nx">@componentContainers</span> <span class="p">).</span><span class="nx">each</span> <span class="p">(</span><span class="nx">container</span><span class="p">)</span><span class="o">=&gt;</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@el</span><span class="p">).</span><span class="nx">append</span> <span class="nx">Luca</span><span class="p">.</span><span class="nx">templates</span><span class="p">[</span><span class="s2">&quot;containers/basic&quot;</span><span class="p">](</span><span class="nx">container</span><span class="p">)</span> </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>prepare components is where you would set necessary object
attributes on the components themselves.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">prepareComponents: </span><span class="nf">()-&gt;</span> 
    <span class="nx">@debug</span> <span class="s2">&quot;container prepare components&quot;</span>
    <span class="vi">@components = </span><span class="nx">_</span><span class="p">(</span> <span class="nx">@components</span> <span class="p">).</span><span class="nx">map</span> <span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nv">panel = </span><span class="nx">@componentContainers</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span>
      <span class="nv">object.container = </span><span class="k">if</span> <span class="nx">@appendContainers</span> <span class="k">then</span> <span class="s2">&quot;##{ panel.id }&quot;</span> <span class="k">else</span> <span class="nx">@el</span>

      <span class="nx">object</span>

  <span class="nv">createComponents: </span><span class="nf">()-&gt;</span>
    <span class="nx">@debug</span> <span class="s2">&quot;container create components&quot;</span>
    <span class="nv">map = </span><span class="vi">@componentIndex = </span>
      <span class="nv">name_index: </span><span class="p">{}</span>
      <span class="nv">cid_index: </span><span class="p">{}</span>

    <span class="vi">@components = </span><span class="nx">_</span><span class="p">(</span> <span class="nx">@components</span> <span class="p">).</span><span class="nx">map</span> <span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span><span class="o">=&gt;</span>
      <span class="nv">component = </span><span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span> <span class="nx">object</span> <span class="p">)</span> <span class="o">and</span> <span class="nx">object</span><span class="p">.</span><span class="nx">ctype</span><span class="o">?</span> <span class="k">then</span> <span class="nx">Luca</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">LazyObject</span><span class="p">(</span> <span class="nx">object</span> <span class="p">)</span> <span class="k">else</span> <span class="nx">object</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>if we're using base backbone views, then they don't extend themselves
with their passed options, so this is a workaround</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="o">!</span><span class="nx">component</span><span class="p">.</span><span class="nx">container</span> <span class="o">and</span> <span class="nx">component</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">container</span>
        <span class="nv">component.container = </span><span class="nx">component</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">container</span>
      
      <span class="k">if</span> <span class="nx">map</span> <span class="o">and</span> <span class="nx">component</span><span class="p">.</span><span class="nx">cid</span><span class="o">?</span>
        <span class="nx">map</span><span class="p">.</span><span class="nx">cid_index</span><span class="p">[</span> <span class="nx">component</span><span class="p">.</span><span class="nx">cid</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">index</span>
      
      <span class="k">if</span> <span class="nx">map</span> <span class="o">and</span> <span class="nx">component</span><span class="p">.</span><span class="nx">name</span><span class="o">?</span>
        <span class="nx">map</span><span class="p">.</span><span class="nx">name_index</span><span class="p">[</span> <span class="nx">component</span><span class="p">.</span><span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">index</span>

      <span class="nx">component</span>
    
    <span class="nx">@debug</span> <span class="s2">&quot;components created&quot;</span><span class="p">,</span> <span class="nx">@components</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Trigger the Rendering Pipeline process on all of the nested
components</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">renderComponents: </span><span class="nf">(@debugMode=&quot;&quot;)-&gt;</span>
    <span class="nx">@debug</span> <span class="s2">&quot;container render components&quot;</span>
    <span class="nx">_</span><span class="p">(</span><span class="nx">@components</span><span class="p">).</span><span class="nx">each</span> <span class="p">(</span><span class="nx">component</span><span class="p">)</span><span class="o">=&gt;</span> 
      <span class="nv">component.getParent = </span><span class="p">()</span><span class="o">=&gt;</span> <span class="err">@</span> 
      <span class="nx">$</span><span class="p">(</span> <span class="nx">component</span><span class="p">.</span><span class="nx">container</span> <span class="p">).</span><span class="nx">append</span> <span class="nx">$</span><span class="p">(</span><span class="nx">component</span><span class="p">.</span><span class="nx">el</span><span class="p">)</span>

      <span class="k">try</span>
        <span class="nx">component</span><span class="p">.</span><span class="nx">render</span><span class="p">()</span>
      <span class="k">catch</span> <span class="nx">e</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s2">&quot;Error Rendering Component #{ component.name || component.cid }&quot;</span><span class="p">,</span> <span class="nx">component</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">e</span><span class="p">.</span><span class="nx">message</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stack</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h3>Container Activation</h3>

<p>When a container is first activated is a good time to perform
operations which are not needed unless that component becomes
visible.  This first activation event should be relayed to all
of the nested components.  Components which hide / display
other components, such as a CardView or TabContainer
will trigger first:activation on the components as they become
displayed.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">firstActivation: </span><span class="nf">()-&gt;</span>  
    <span class="nx">_</span><span class="p">(</span> <span class="nx">@components</span> <span class="p">).</span><span class="nx">each</span> <span class="p">(</span><span class="nx">component</span><span class="p">)</span><span class="o">=&gt;</span>
      <span class="nv">activator = </span><span class="err">@</span>
      </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>apply the first:activation trigger on the component, in the context of the component
passing as arguments the component itself, and the component doing the activation</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">unless</span> <span class="nx">component</span><span class="o">?</span><span class="p">.</span><span class="nx">previously_activated</span> <span class="o">is</span> <span class="kc">true</span> 
        <span class="nx">component</span><span class="o">?</span><span class="p">.</span><span class="nx">trigger</span><span class="o">?</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">component</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;first:activation&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">component</span><span class="p">,</span> <span class="nx">activator</span><span class="p">]</span> <span class="p">]</span>
        <span class="nv">component.previously_activated = </span><span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <h3>Component Finder Methods</h3>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">select: </span><span class="nf">(attribute, value, deep=false)-&gt;</span>
    <span class="nv">components = </span><span class="nx">_</span><span class="p">(</span> <span class="nx">@components</span> <span class="p">).</span><span class="nx">map</span> <span class="nf">(component)-&gt;</span>
      <span class="nv">matches = </span><span class="p">[]</span>
      <span class="nv">test = </span><span class="nx">component</span><span class="p">[</span> <span class="nx">attribute</span> <span class="p">]</span>

      <span class="nx">matches</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">component</span> <span class="p">)</span> <span class="k">if</span> <span class="nx">test</span> <span class="o">is</span> <span class="nx">value</span>

      <span class="k">if</span> <span class="nx">deep</span> <span class="o">is</span> <span class="kc">true</span> <span class="o">and</span> <span class="nx">component</span><span class="p">.</span><span class="nx">isContainer</span> <span class="o">is</span> <span class="kc">true</span>
        <span class="nx">matches</span><span class="p">.</span><span class="nx">push</span> <span class="nx">component</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">attribute</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>

      <span class="nx">_</span><span class="p">.</span><span class="nx">compact</span> <span class="nx">matches</span>

    <span class="nx">_</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span> <span class="nx">components</span> <span class="p">)</span>

  <span class="nv">findComponentByName: </span><span class="nf">(name, deep=false)-&gt;</span> 
    <span class="nx">@findComponent</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;name_index&quot;</span><span class="p">,</span> <span class="nx">deep</span><span class="p">)</span>

  <span class="nv">findComponentById: </span><span class="nf">(id, deep=false)-&gt;</span> 
    <span class="nx">@findComponent</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="s2">&quot;cid_index&quot;</span><span class="p">,</span> <span class="nx">deep</span><span class="p">)</span>

  <span class="nv">findComponent: </span><span class="nf">(needle, haystack=&quot;name&quot;, deep=false)-&gt;</span>
    <span class="nv">position = </span><span class="nx">@componentIndex</span><span class="o">?</span><span class="p">[</span> <span class="nx">haystack</span> <span class="p">][</span> <span class="nx">needle</span> <span class="p">]</span>
    <span class="nv">component = </span><span class="nx">@components</span><span class="o">?</span><span class="p">[</span> <span class="nx">position</span> <span class="p">]</span>

    <span class="k">return</span> <span class="nx">component</span> <span class="k">if</span> <span class="nx">component</span>
    
    <span class="k">if</span> <span class="nx">deep</span> <span class="o">is</span> <span class="kc">true</span>
      <span class="nv">sub_container = </span><span class="nx">_</span><span class="p">(</span> <span class="nx">@components</span> <span class="p">).</span><span class="nx">detect</span> <span class="nf">(component)-&gt;</span> <span class="nx">component</span><span class="o">?</span><span class="p">.</span><span class="nx">findComponent</span><span class="o">?</span><span class="p">(</span><span class="nx">needle</span><span class="p">,</span> <span class="nx">haystack</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
      <span class="nx">sub_container</span><span class="o">?</span><span class="p">.</span><span class="nx">findComponent</span><span class="o">?</span><span class="p">(</span><span class="nx">needle</span><span class="p">,</span> <span class="nx">haystack</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>run a function for each component in this container
and any nested containers in those components, recursively
pass false as the second argument to skip the deep recursion</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">eachComponent: </span><span class="nf">(fn, deep=true)-&gt;</span>
    <span class="nx">_</span><span class="p">(</span> <span class="nx">@components</span> <span class="p">).</span><span class="nx">each</span> <span class="p">(</span><span class="nx">component</span><span class="p">)</span><span class="o">=&gt;</span>
      <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">component</span><span class="p">,</span> <span class="p">[</span><span class="nx">component</span><span class="p">]</span>
      <span class="nx">component</span><span class="o">?</span><span class="p">.</span><span class="nx">eachComponent</span><span class="o">?</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">component</span><span class="p">,</span> <span class="p">[</span><span class="nx">fn</span><span class="p">,</span><span class="nx">deep</span><span class="p">]</span> <span class="k">if</span> <span class="nx">deep</span>
  
  <span class="nv">indexOf: </span><span class="nf">(name)-&gt;</span>
    <span class="nv">names = </span><span class="nx">_</span><span class="p">(</span> <span class="nx">@components</span> <span class="p">).</span><span class="nx">pluck</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
    <span class="nx">_</span><span class="p">(</span> <span class="nx">names</span> <span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span>
  
  <span class="nv">activeComponent: </span><span class="nf">()-&gt;</span>
    <span class="k">return</span> <span class="err">@</span> <span class="nx">unless</span> <span class="nx">@activeItem</span>
    <span class="k">return</span> <span class="nx">@components</span><span class="p">[</span> <span class="nx">@activeItem</span> <span class="p">]</span>

  <span class="nv">componentElements: </span><span class="nf">()-&gt;</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.#{ @componentClass }&quot;</span><span class="p">,</span> <span class="nx">@el</span><span class="p">)</span>
 
  <span class="nv">getComponent: </span><span class="nf">(needle)-&gt;</span> 
    <span class="nx">@components</span><span class="p">[</span> <span class="nx">needle</span> <span class="p">]</span>
  
  <span class="nv">rootComponent: </span><span class="nf">()-&gt;</span> 
    <span class="o">!</span><span class="nx">@getParent</span><span class="o">?</span>

  <span class="nv">getRootComponent: </span><span class="nf">()-&gt;</span> 
    <span class="k">if</span> <span class="nx">@rootComponent</span><span class="p">()</span> <span class="k">then</span> <span class="err">@</span> <span class="k">else</span> <span class="nx">@getParent</span><span class="p">().</span><span class="nx">getRootComponent</span><span class="p">()</span>

<span class="nx">Luca</span><span class="p">.</span><span class="nx">register</span> <span class="s2">&quot;container&quot;</span><span class="p">,</span> <span class="s2">&quot;Luca.core.Container&quot;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 